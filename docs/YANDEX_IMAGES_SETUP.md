# Тематические фото через Yandex Search API

Карточки услуг подгружают тематические картинки по ключевым словам. Источник по умолчанию — **Yandex Search API** (поиск по картинкам), запасной — Unsplash.

## Что нужно сделать с твоей стороны

### 1. Регистрация в Yandex Cloud

1. Зайди на **https://yandex.cloud**
2. Войди по аккаунту Яндекса или зарегистрируйся
3. Создай **каталог** (или используй существующий)

### 2. Подключить Search API и получить Api-Key

1. В консоли Yandex Cloud открой **Search API** (в каталоге сервисов или через поиск)
2. Нажми **Подключить** / **Создать API-ключ**
3. Создай **сервисный аккаунт** (если попросят) и выдай ему роль на использование Search API
4. Создай **API-ключ** и скопируй его (показывается один раз)

Подробно: **https://yandex.cloud/ru/docs/search-api/quickstart**

### 3. Добавить ключ в проект

В корне проекта в файле **`.env`** добавь (подставь свой ключ):

```env
VITE_YANDEX_SEARCH_API_KEY=твой_api_ключ_здесь
```

Для продакшена то же значение пропиши в **`.env.production`**.

### 4. Перезапустить приложение

После изменения `.env` перезапусти dev-сервер:

```bash
npm run dev
```

---

## Как это работает в коде

- **Страницы категорий** (например `/services/handyman`) и **страница услуги** запрашивают тематическое фото по ключевым словам (sink, kitchen, tile и т.д.).
- Сначала используется **Yandex Search API**: запрос с твоим ключом, в ответ приходит URL картинки.
- Результаты **кешируются**: в памяти и в `localStorage` на 7 дней, чтобы не тратить лимиты при повторных заходах.
- Если ключа нет или запрос к Yandex не удался — пробуется **Unsplash** (если задан `VITE_UNSPLASH_ACCESS_KEY`), иначе подставляется локальное фото из `/assets/products/`.

## Лимиты и оплата

- У Yandex Cloud есть **бесплатный лимит** на запросы (уточняй в кабинете по тарифу Search API).
- Для небольшого сайта с кешем обычно хватает бесплатного объёма.

## Если в браузере ошибка CORS

Если при запросе к `searchapi.yandex.cloud` появляется CORS-ошибка, значит API не разрешает вызовы напрямую из браузера. Тогда нужно вызывать Yandex API **с твоего бэкенда** (например Node.js) и отдавать фронту уже готовый URL картинки; текущий код на фронте можно перевести на запрос к твоему API вместо прямого вызова Yandex.
